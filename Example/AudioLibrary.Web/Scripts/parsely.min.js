!function(a){"use strict";var b=function(a){this.init(a)};b.prototype={constructor:b,messages:{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than %s.",max:"This value should be lower than %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",equalto:"This value should be the same."},validators:{notnull:function(a){return a.length>0},notblank:function(a){return null!==a&&""!==a.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(a){if("object"==typeof a){for(var b in a)if(this.required(a[b]))return!0;return!1}return this.notnull(a)&&this.notblank(a)},type:function(a,b){var c;switch(b){case"number":c=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":c=/^\d+$/;break;case"alphanum":c=/^\w+$/;break;case"email":c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":a=(new RegExp("(https?|s?ftp|git)","i")).test(a)?a:"http://"+a;case"urlstrict":c=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":c=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return""!==a?c.test(a):!1},regexp:function(a,b){return(new RegExp(b,"i")).test(a)},minlength:function(a,b){return a.length>=b},maxlength:function(a,b){return a.length<=b},rangelength:function(a,b){return this.minlength(a,b[0])&&this.maxlength(a,b[1])},min:function(a,b){return new Number(a)>=new Number(b)},max:function(a,b){return new Number(a)<=new Number(b)},range:function(a,b){return a>=b[0]&&a<=b[1]},equalto:function(b,c){return b===a(c).val()},remote:function(b,c,d){var e=null,f={},g={};f[d.$element.attr("name")]=b,"undefined"!=typeof d.options.remoteDatatype&&(g={dataType:d.options.remoteDatatype});var h=function(a){d.updateConstraint("remote","isValid",a),d.manageValidationResult()};return a.ajax(a.extend({},{url:c,data:f,async:d.async,method:d.options.remoteMethod||"GET",success:function(a){h("1"===a||"true"==a||"object"==typeof a&&"undefined"!=typeof a.success||(new RegExp("success","i")).test(a))},error:function(a){h(!1)}},g)),d.async&&h(e),e},mincheck:function(a,b){return this.minlength(a,b)},maxcheck:function(a,b){return this.maxlength(a,b)},rangecheck:function(a,b){return this.rangelength(a,b)}},init:function(a){var b=a.validators,c=a.messages;for(var d in b)this.addValidator(d,b[d]);for(var d in c)this.addMessage(d,c[d])},formatMesssage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMesssage(a,b[c]);return a}return a.replace(new RegExp("%s","i"),b)},addValidator:function(a,b){this.validators[a]=b},addMessage:function(a,b){if("type"===a){for(var c in b)this.messages.type[c]=b[c];return}this.messages[a]=b}};var c=function(a,c,d){return this.options=c,this.Validator=new b(c),this.init(a,d||"ParsleyField"),this};c.prototype={constructor:c,init:function(b,c){this.type=c,this.isValid=!0,this.element=b,this.validatedOnce=!1,this.$element=a(b),this.val=this.$element.val(),this.isRequired=!1,this.constraints=[],"undefined"==typeof this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(b)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.constraints.length&&this.bindValidationEvents()},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required"))this.options.required=!0;"undefined"!=typeof this.$element.attr("type")&&(new RegExp(this.$element.attr("type"),"i")).test("email url number range")&&(this.options.type=this.$element.attr("type"),(new RegExp(this.options.type,"i")).test("number range")&&(this.options.type="number","undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max"))))},addConstraints:function(){for(var a in this.options)"function"==typeof this.Validator.validators[a.toLowerCase()]&&(this.constraints.push({name:a,requirements:this.options[a],isValid:null}),a==="required"&&(this.isRequired=!0))},bindValidationEvents:function(){this.$element.addClass("parsley-validated");var b=this.options.trigger+((new RegExp("key","i")).test(this.options.trigger)?"":" keyup");this.options.remote&&(b+=(new RegExp("change","i")).test(b)?"":" change"),b&&this.$element.on(b.split(" ").join("."+this.type+" "),!1,a.proxy(this.eventValidation,this))},generateHash:function(){var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return"parsley-"+a},getHash:function(){return this.hash},getVal:function(){return this.$element.val()},eventValidation:function(a){var b=this.getVal();if(a.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce)return!0;if(b.length<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate(!0,!1)},isFieldValid:function(){return this.validate(!1,!1)},validate:function(a,b){var c=this.getVal(),d=null;return this.options.listeners.onFieldValidate(this.element,this)||""===c&&!this.isRequired?(this.reset(),null):this.needsValidation(c)?(this.errorBubbling="undefined"!=typeof a?a:!0,this.async="undefined"!=typeof b?b:!0,d=this.applyValidators(),this.errorBubbling&&this.manageValidationResult(),d):this.isValid},needsValidation:function(a){return this.val===a&&this.validatedOnce?!1:(this.val=a,this.validatedOnce=!0)},applyValidators:function(){var a=null;for(var b in this.constraints){var c=this.Validator.validators[this.constraints[b].name](this.val,this.constraints[b].requirements,this);!1===c?(a=!1,this.constraints[b].isValid=a):!0===c&&(this.constraints[b].isValid=!0,a=!1!==a)}return a},updateConstraint:function(a,b,c){for(var d in this.constraints)if(this.constraints[d].name===a){this.constraints[d][b]=c;break}},manageValidationResult:function(){var a=null;for(var b in this.constraints)!1===this.constraints[b].isValid?(this.addError(this.constraints[b]),a=!1):!0===this.constraints[b].isValid&&(this.removeError(this.constraints[b].name),a=!1!==a);return this.isValid=a,!0===this.isValid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),this.options.listeners.onFieldSuccess(this.element,this.constraints,c),!0):!1===this.isValid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),this.options.listeners.onFieldError(this.element,this.constraints,c),!1):a},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=a(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(b){var c=this.ulError+" ."+b;this.ulError&&a(c).remove()&&a(this.ulError).children().length===0&&a(this.ulError).remove()},removeErrors:function(){!this.ulError||a(this.ulError).remove()},reset:function(){this.isValid=null,this.removeErrors(),this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)},addError:function(b){a(this.ulError).length||this.options.errors.container(this.element,this.ulTemplate,this.isRadioOrCheckbox)||(this.isRadioOrCheckbox?this.$element.parent().after(this.ulTemplate):this.$element.after(this.ulTemplate));var c=b.name,d=this.ulError+" ."+c,e=a(this.options.errors.errorElem).addClass(c),f=!1!==this.options.errorMessage?this.options.errorMessage:b.name==="type"?this.Validator.messages[c][b.requirements]:"undefined"==typeof this.Validator.messages[c]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[c],b.requirements);!a(d).length&&(a(d).length!==1||!1===this.options.errorMessage)&&a(this.ulError).append(a(e).text(f))},addListener:function(a){for(var b in a)this.options.listeners[b]=a[b]}};var d=function(a,b){this.initMultiple(a,b),this.inherit(a,b),this.init(a,b)};d.prototype={constructor:d,initMultiple:function(b,c){this.element=b,this.$element=a(b),this.hash=this.getName(),this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.siblings='input[name="'+this.$element.attr("name")+'"]',this.$siblings=a(this.siblings),this.errorClassHandler=c.errors.classHandler(b)||this.$element.parent()},inherit:function(b,d){var e={mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices."},d=a.extend(!0,{},{messages:e},d),f=new c(b,d);for(var g in f)"undefined"==typeof this[g]&&(this[g]=f[g])},getName:function(){return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return a(this.siblings+":checked").val()||"";if(this.isCheckbox){var b=[];return a(this.siblings+":checked").each(function(){b.push(a(this).val())}),b}}};var e=function(a,b){this.init("parsleyForm",a,b)};e.prototype={constructor:e,init:function(b,c,d){this.type=b,this.items=[],this.$element=a(c),this.options=d;var e=this;this.$element.find(d.inputs).each(function(){a(this).parsley(d),e.items.push(a(this))}),this.$element.on("submit",!1,a.proxy(this.validate,this))},addListener:function(a){for(var b in a)if((new RegExp("Field")).test(b))for(var c in this.items)this.items[c].parsley("addListener",a);else this.options[b]=a[b]},validate:function(a){var b=!0;this.focusedField=!1;for(var c in this.items)if(!1===this.items[c].parsley("validate")){b=!1;if(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)this.focusedField=this.items[c]}return b||this.focusedField.focus(),this.options.listeners.onFormSubmit(b,a,this),b},removeErrors:function(){for(var a in this.items)this.items[a].parsley("reset")}},a.fn.parsley=function(b,f){function i(h,i){var j=a(h).data(i);if(!j){switch(i){case"parsleyForm":j=new e(h,g);break;case"parsleyField":j=new c(h,g);break;case"parsleyFieldMultiple":j=new d(h,g);break;default:return}a(h).data(i,j)}if("string"==typeof b&&"function"==typeof j[b])return j[b](f)}var g=a.extend(!0,{},a.fn.parsley.defaults,b,this.data()),h=null;return a(this).is("form")?h=i(a(this),"parsleyForm"):a(this).is(g.inputs)&&!a(this).is(g.excluded)&&(h=i(a(this),a(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof f?f():h},a.fn.parsley.Constructor=e,a.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden]",trigger:!1,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},messages:{},errors:{classHandler:function(a){},container:function(a,b,c){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(a,b){return!1},onFormSubmit:function(a,b,c){},onFieldError:function(a,b,c){},onFieldSuccess:function(a,b,c){}}},a(window).on("load",function(){a.fn.parsley.defaults=a.extend(!0,{},a.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?ParsleyConfig:{}),a('[data-validate="parsley"]').each(function(){a(this).parsley()})})}(window.jQuery||window.Zepto)