var TodoApp=angular.module("TodoApp",["ngResource"]).config(function(a){a.when("/",{controller:TodoListCtrl,templateUrl:"/Templates/TodoList.html"}).when("/edit/:todoId",{controller:TodoEditCtrl,templateUrl:"/Templates/TodoEdit.html"}).otherwise({redirectTo:"/"})});TodoApp.factory("Todo",function(a){return a("/api/todos/:Id",{Id:"@Id"},{update:{method:"PUT"},deleteAll:{method:"DELETE"}})});var TodoListCtrl=function(a,b,c){a.getTodos=function(){c.query({format:"json"},function(b){a.todos=[],a.todos=a.todos.concat(b)})},a.addTodo=function(){c.save(a.todo,function(b){a.todos.push(b),a.todo.Task=""})},a.archive=function(){var b=$.grep(a.todos,function(a){return a.Completed}),d=[];angular.forEach(b,function(a,b){d.push(a.Id)}),c.deleteAll({format:"json",Ids:d},function(){var b=$.grep(a.todos,function(a){return!a.Completed});a.todos=[],a.todos=b},Application.GenericErrorMessage)},a.getTodos()},TodoEditCtrl=function(a,b,c,d){a.todo=d.get({Id:b.todoId}),a.update=function(){d.update({Id:a.todo.Id},a.todo,function(){c.path("/")})}}