(function(a){function d(a,b){var c=window,d=(a||"").split(".");while(c&&d.length)c=c[d.shift()];return typeof c=="function"?c:(b.push(a),Function.constructor.apply(null,b))}function e(a){return a==="GET"||a==="POST"}function f(a,b){e(b)||a.setRequestHeader("X-HTTP-Method-Override",b)}function g(b,c,d){var e;if(d.indexOf("application/x-javascript")!==-1)return;e=(b.getAttribute("data-ajax-mode")||"").toUpperCase(),a(b.getAttribute("data-ajax-update")).each(function(b,d){var f;switch(e){case"BEFORE":f=d.firstChild,a("<div />").html(c).contents().each(function(){d.insertBefore(this,f)});break;case"AFTER":a("<div />").html(c).contents().each(function(){d.appendChild(this)});break;default:a(d).html(c)}})}function h(b,c){var h,i,j,k;h=b.getAttribute("data-ajax-confirm");if(h&&!window.confirm(h))return;i=a(b.getAttribute("data-ajax-loading")),k=b.getAttribute("data-ajax-loading-duration")||0,a.extend(c,{type:b.getAttribute("data-ajax-method")||undefined,url:b.getAttribute("data-ajax-url")||undefined,beforeSend:function(a){var c;return f(a,j),c=d(b.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),c!==!1&&i.show(k),c},complete:function(){i.hide(k),d(b.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,c,e){g(b,a,e.getResponseHeader("Content-Type")||"text/html"),d(b.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:d(b.getAttribute("data-ajax-failure"),["xhr","status","error"])}),c.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),j=c.type.toUpperCase(),e(j)||(c.type="POST",c.data.push({name:"X-HTTP-Method-Override",value:j})),a.ajax(c)}function i(b){var d=a(b).data(c);return!d||!d.validate||d.validate()}var b="unobtrusiveAjaxClick",c="unobtrusiveValidation";a("a[data-ajax=true]").on("click",function(a){a.preventDefault(),h(this,{url:this.href,type:"GET",data:[]})}),a("form[data-ajax=true] input[type=image]").on("click",function(c){var d=c.target.name,e=a(c.target),f=e.parents("form")[0],g=e.offset();a(f).data(b,[{name:d+".x",value:Math.round(c.pageX-g.left)},{name:d+".y",value:Math.round(c.pageY-g.top)}]),setTimeout(function(){a(f).removeData(b)},0)}),a("form[data-ajax=true] :submit").on("click",function(c){var d=c.target.name,e=a(c.target).parents("form")[0];a(e).data(b,d?[{name:d,value:c.target.value}]:[]),setTimeout(function(){a(e).removeData(b)},0)}),a("form[data-ajax=true]").on("submit",function(c){var d=a(this).data(b)||[];c.preventDefault();if(!i(this))return;h(this,{url:this.action,type:this.method||"GET",data:d.concat(a(this).serializeArray())})})})(jQuery)